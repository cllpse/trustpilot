var RatingsHelper=function(t){var e=[];!function(){for(var r=t.length;r;)r--,e.push(parseInt(t[r].starRating,10))}(),this.getCollection=function(){return t},this.getRatings=function(){return e},this.getAverageRating=function(){for(var t=e.length,r=t,n=0;r;)r--,n+=e[r];return n/t},this.getAverageRatingCeiled=function(){return Math.ceil(this.getAverageRating())},this.getAverageRatingFormatted=function(){return this.getAverageRatingCeiled()+",0"},this.getStarDistribution=function(){for(var t=e.length,r=[0,0,0,0,0];t;)t--,r[e[t]-1]+=1;return r},this.getStarDistributionPercentages=function(){for(var t=this.getStarDistribution(),r=t.length;r;)r--,t[r]=t[r]/e.length*100;return t}};$(function(){setTimeout(function(){$.ajax({url:"resources/reviews-alt.json",success:function(t){var e=new RatingsHelper(t.reviews),r=$(".scope-trustpilot");!function(){var t=r.find("header");t.find("h1").html(e.getAverageRatingFormatted()),t.find(".ratings").addClass("rating-"+e.getAverageRatingCeiled()),t.find("h2").addClass("rating-"+e.getAverageRatingCeiled()),t.find("h2 a span").html(e.getRatings().length)}(),function(){for(var t=r.find("section .bar-chart"),n=[],i=e.getStarDistributionPercentages(),a=i.length;a;)a--,n.push("<figure><figure style='width:"+i[a]+"%'></figure></figure>");t.html(n.join(""))}(),r.removeClass("data-working data-error").addClass("data-loaded")},error:function(){$(".scope-trustpilot").removeClass("data-working data-loaded").addClass("data-error")}})},1e3)});